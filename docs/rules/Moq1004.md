# Moq1004: ILogger should not be mocked

| Item     | Value   |
| -------- | ------- |
| Enabled  | True    |
| Severity | Warning |
| CodeFix  | False   |

---

Mocking `ILogger` or `ILogger<T>` is unnecessary and fragile. Use `NullLogger<T>.Instance` for tests
that ignore logging, or `FakeLogger` from `Microsoft.Extensions.Diagnostics.Testing` for tests that
verify log output.

## Examples of patterns that are flagged by this analyzer

```csharp
using Microsoft.Extensions.Logging;

var mock = new Mock<ILogger>(); // Moq1004
var mock2 = new Mock<ILogger<MyService>>(); // Moq1004
var logger = Mock.Of<ILogger<MyService>>(); // Moq1004
```

## Solution

```csharp
using Microsoft.Extensions.Logging;
using Microsoft.Extensions.Logging.Abstractions;

// For tests that ignore logging
ILogger<MyService> logger = NullLogger<MyService>.Instance;
```

```csharp
using Microsoft.Extensions.Diagnostics.Testing;

// For tests that verify log output
var fakeLogger = new FakeLogger<MyService>();
```

## Suppress a warning

If you just want to suppress a single violation, add preprocessor directives to
your source file to disable and then re-enable the rule.

```csharp
#pragma warning disable Moq1004
var mock = new Mock<ILogger<MyService>>(); // Moq1004
#pragma warning restore Moq1004
```

To disable the rule for a file, folder, or project, set its severity to `none`
in the
[configuration file](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/configuration-files).

```ini
[*.{cs,vb}]
dotnet_diagnostic.Moq1004.severity = none
```

For more information, see
[How to suppress code analysis warnings](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/suppress-warnings).
