# Moq1900: MockRepository.Verify() should be called

| Item     | Value   |
| -------- | ------- |
| Enabled  | True    |
| Severity | Warning |
| CodeFix  | True    |
---

When using MockRepository to create mocks, you should call Verify() on the repository to verify all created mocks. Forgetting to call Verify() means that verification failures for repository-created mocks will not be detected, potentially missing important test failures.

## Examples of patterns that are flagged by this analyzer

```csharp
public interface IFoo
{
    void DoSomething();
}

var repository = new MockRepository(MockBehavior.Strict); // Moq1900: MockRepository.Verify() should be called
var fooMock = repository.Create<IFoo>();

// Test code that uses fooMock...

// Missing: repository.Verify();
```

```csharp
public interface IFoo
{
    void DoSomething();
}

void TestMethod()
{
    var repository = new MockRepository(MockBehavior.Default); // Moq1900: MockRepository.Verify() should be called
    var mock1 = repository.Create<IFoo>();
    var mock2 = repository.Create<IFoo>();
    
    // Test logic...
    
    // Verify() not called on repository
}
```

## Solution

Always call Verify() on MockRepository instances:

```csharp
public interface IFoo
{
    void DoSomething();
}

var repository = new MockRepository(MockBehavior.Strict);
var fooMock = repository.Create<IFoo>();

// Setup expectations
fooMock.Setup(x => x.DoSomething());

// Test code that uses fooMock...

// Verify all repository-created mocks
repository.Verify();
```

## Suppress a warning

If you just want to suppress a single violation, add preprocessor directives to
your source file to disable and then re-enable the rule.

```csharp
#pragma warning disable Moq1900
var repository = new MockRepository(MockBehavior.Strict); // Moq1900: MockRepository.Verify() should be called
#pragma warning restore Moq1900
```

To disable the rule for a file, folder, or project, set its severity to `none`
in the
[configuration file](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/configuration-files).

```ini
[*.{cs,vb}]
dotnet_diagnostic.Moq1900.severity = none
```

For more information, see
[How to suppress code analysis warnings](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/suppress-warnings).