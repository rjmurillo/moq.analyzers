# Moq1500: Verify should only be used for overridable members

| Item     | Value   |
| -------- | ------- |
| Enabled  | True    |
| Severity | Warning |
| CodeFix  | True    |
---

Verify is used to assert that a method or property was called. However, Verify only works on virtual/abstract members or interface implementations. Calling Verify on non-virtual members will not work as expected because Moq cannot intercept the calls.

## Examples of patterns that are flagged by this analyzer

```csharp
public class SampleClass
{
    public bool NonVirtualMethod() => true; // Non-virtual method
}

var mock = new Mock<SampleClass>();
mock.Verify(x => x.NonVirtualMethod()); // Moq1500: Verify should only be used for overridable members
```

```csharp
public class BaseClass
{
    public virtual bool VirtualMethod() => true;
    public bool NonVirtualMethod() => true; // Non-virtual method
}

var mock = new Mock<BaseClass>();
mock.Verify(x => x.NonVirtualMethod()); // Moq1500: Verify should only be used for overridable members
```

## Solution

Use Verify only on virtual/abstract members or interface implementations:

```csharp
public interface ISample
{
    bool DoSomething();
}

public class BaseClass
{
    public virtual bool VirtualMethod() => true;
}

var interfaceMock = new Mock<ISample>();
interfaceMock.Verify(x => x.DoSomething()); // OK - interface member

var classMock = new Mock<BaseClass>();
classMock.Verify(x => x.VirtualMethod()); // OK - virtual member
```

## Suppress a warning

If you just want to suppress a single violation, add preprocessor directives to
your source file to disable and then re-enable the rule.

```csharp
#pragma warning disable Moq1500
mock.Verify(x => x.NonVirtualMethod()); // Moq1500: Verify should only be used for overridable members
#pragma warning restore Moq1500
```

To disable the rule for a file, folder, or project, set its severity to `none`
in the
[configuration file](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/configuration-files).

```ini
[*.{cs,vb}]
dotnet_diagnostic.Moq1500.severity = none
```

For more information, see
[How to suppress code analysis warnings](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/suppress-warnings).